<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Painel do Instrutor - DevRise</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Reset e estilos gerais */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f4f4f9; color: #333; line-height: 1.6; }
    
    .btn { display: inline-block; padding: 10px 20px; background: #3498db; color: #fff; border-radius: 5px; text-decoration: none; font-weight: bold; transition: all 0.3s; border: none; cursor: pointer; }
    .btn:hover { background: #2980b9; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
    .btn-danger { background: #e74c3c; }
    .btn-danger:hover { background: #c0392b; }
    .btn-success { background: #2ecc71; }
    .btn-success:hover { background: #27ae60; }

    /* Dashboard Section */
    .dashboard-section { padding: 20px; background: #f9f9f9; min-height: 100vh; }
    .dashboard { display: flex; min-height: 500px; max-width: 1400px; margin: 0 auto; border-radius: 10px; overflow: hidden; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
    .sidebar { background: #34495e; color: #fff; min-width: 250px; padding: 30px 20px; }
    .sidebar h2 { margin-bottom: 30px; text-align: center; }
    .sidebar ul { list-style: none; }
    .sidebar ul li { margin: 20px 0; }
    .sidebar ul li a { color: #fff; text-decoration: none; display: flex; align-items: center; gap: 12px; padding: 10px; border-radius: 4px; transition: background 0.3s; }
    .sidebar ul li a:hover, .sidebar ul li a.active { background: rgba(255,255,255,0.1); }
    .main-content { flex: 1; padding: 30px; background: #fff; }
    .main-content header { margin-bottom: 30px; border-bottom: 1px solid #eee; padding-bottom: 20px; }
    
    /* Cards de Estatísticas */
    .cards { display: flex; gap: 20px; margin-bottom: 30px; flex-wrap: wrap; }
    .card { background: #f8f9fa; padding: 20px; border-radius: 10px; flex: 1; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.05); min-width: 200px; border-left: 4px solid #3498db; }
    .card:nth-child(2) { border-left-color: #2ecc71; }
    .card:nth-child(3) { border-left-color: #e74c3c; }
    .card:nth-child(4) { border-left-color: #f39c12; }
    .card h3 { color: #7f8c8d; font-size: 0.9rem; margin-bottom: 10px; }
    .card p { font-size: 1.8rem; font-weight: bold; color: #2c3e50; }
    
    /* Formulário de Cursos */
    .form-section { background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 30px; }
    .form-group { margin-bottom: 15px; }
    .form-group label { display: block; margin-bottom: 5px; font-weight: bold; color: #34495e; }
    .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
    .form-group textarea { height: 100px; resize: vertical; }
    .form-group small { color: #666; display: block; margin-top: 5px; }
    
    /* Lista de Cursos */
    .course-list { background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
    .course-item { display: flex; justify-content: space-between; padding: 15px; border-bottom: 1px solid #eee; align-items: center; }
    .course-item:last-child { border-bottom: none; }
    .course-actions { display: flex; gap: 10px; }
    
    /* Tabelas */
    .table-section { overflow-x: auto; margin-bottom: 30px; }
    .table-section h2 { margin-bottom: 20px; color: #2c3e50; }
    .table-section table { width: 100%; border-collapse: collapse; background: #fff; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
    .table-section th, .table-section td { padding: 15px; border: 1px solid #eee; text-align: left; }
    .table-section th { background: #f8f9fa; color: #34495e; font-weight: 600; }
    .table-section tr:nth-child(even) { background: #f8f9fa; }
    .table-section tr:hover { background: #f1f7fd; }
    
    /* Seções do Dashboard */
    .dashboard-section { display: none; }
    .dashboard-section.active { display: block; }
    
    /* Form de Edição */
    .edit-form { display: none; margin-top: 20px; padding: 20px; background: #f8f9fa; border-radius: 10px; }
    
    /* Mensagem quando não há cursos */
    .no-courses { text-align: center; padding: 40px; background: #fff; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
    
    /* Informações de Comissão */
    .commission-info { background: #e8f4fc; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #3498db; }
    
    /* Responsividade */
    @media (max-width: 768px) {
      .dashboard { flex-direction: column; }
      .sidebar { min-width: 100%; }
      .cards { flex-direction: column; }
      .course-item { flex-direction: column; align-items: flex-start; }
      .course-actions { margin-top: 15px; width: 100%; justify-content: space-between; }
    }
  </style>
</head>
<body>
  <!-- Dashboard Section -->
  <section class="dashboard-section active" id="main-dashboard">
    <div class="dashboard">
      <!-- Sidebar -->
      <aside class="sidebar">
        <h2>Painel do Instrutor</h2>
        <ul>
          <li><a href="https://kzin82666-hub.github.io/Dev/"><i class="fa-solid fa-home"></i> Voltar ao Site</a></li>
          <li><a href="#" class="active" data-section="main-dashboard"><i class="fa-solid fa-gauge"></i> Dashboard</a></li>
          <li><a href="#" data-section="courses-section"><i class="fa-solid fa-book"></i> Meus Cursos</a></li>
          <li><a href="#" data-section="stats-section"><i class="fa-solid fa-chart-line"></i> Estatísticas</a></li>
          <li><a href="#" data-section="finance-section"><i class="fa-solid fa-wallet"></i> Financeiro</a></li>
          <li><a href="#" data-section="settings-section"><i class="fa-solid fa-gear"></i> Configurações</a></li>
        </ul>
      </aside>

      <!-- Main -->
      <main class="main-content">
        <header>
          <h1>Dashboard</h1>
          <p>Visão geral da sua performance na plataforma</p>
        </header>

        <div class="commission-info">
          <h3><i class="fas fa-info-circle"></i> Informações de Comissão</h3>
          <p>A cada venda, é cobrada uma taxa de R$ 30,00 para a plataforma. O valor restante é destinado a você.</p>
          <p><strong>PIX para pagamentos: 10422308110</strong></p>
        </div>

        <div class="cards">
          <div class="card">
            <h3>Total de Cursos</h3>
            <p id="total-courses">0</p>
          </div>
          <div class="card">
            <h3>Total de Alunos</h3>
            <p id="total-students">0</p>
          </div>
          <div class="card">
            <h3>Faturamento Total</h3>
            <p id="total-revenue">R$ 0,00</p>
          </div>
          <div class="card">
            <h3>Sua Receita</h3>
            <p id="instructor-revenue">R$ 0,00</p>
          </div>
        </div>

        <div class="table-section">
          <h2>Seus Cursos Mais Populares</h2>
          <table id="popular-courses">
            <thead>
              <tr>
                <th>Curso</th>
                <th>Alunos</th>
                <th>Faturamento</th>
                <th>Sua Receita</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td colspan="4" style="text-align: center;">Nenhum curso disponível</td>
              </tr>
            </tbody>
          </table>
        </div>
      </main>
    </div>
  </section>

  <!-- Seção de Cursos -->
  <section class="dashboard-section" id="courses-section">
    <div class="dashboard">
      <aside class="sidebar">
        <h2>Painel do Instrutor</h2>
        <ul>
          <li><a href="https://kzin82666-hub.github.io/Dev/"><i class="fa-solid fa-home"></i> Voltar ao Site</a></li>
          <li><a href="#" data-section="main-dashboard"><i class="fa-solid fa-gauge"></i> Dashboard</a></li>
          <li><a href="#" class="active" data-section="courses-section"><i class="fa-solid fa-book"></i> Meus Cursos</a></li>
          <li><a href="#" data-section="stats-section"><i class="fa-solid fa-chart-line"></i> Estatísticas</a></li>
          <li><a href="#" data-section="finance-section"><i class="fa-solid fa-wallet"></i> Financeiro</a></li>
          <li><a href="#" data-section="settings-section"><i class="fa-solid fa-gear"></i> Configurações</a></li>
        </ul>
      </aside>

      <main class="main-content">
        <header>
          <h1>Gerenciamento de Cursos</h1>
          <p>Adicione e gerencie seus cursos na plataforma</p>
        </header>

        <div class="commission-info">
          <h3><i class="fas fa-info-circle"></i> Informações de Comissão</h3>
          <p>A cada venda, é cobrada uma taxa de R$ 30,00 para a plataforma. O valor restante é destinado a você.</p>
          <p><strong>PIX para pagamentos: 10422308110</strong></p>
        </div>

        <section class="form-section">
          <h2>Adicionar Novo Curso</h2>
          <form id="course-form">
            <div class="form-group">
              <label for="course-title">Título do Curso *</label>
              <input type="text" id="course-title" required placeholder="Ex: JavaScript Moderno">
            </div>
            <div class="form-group">
              <label for="course-description">Descrição *</label>
              <textarea id="course-description" required placeholder="Descreva o conteúdo do curso, o que os alunos aprenderão, etc."></textarea>
            </div>
            <div class="form-group">
              <label for="course-instructor">Seu Nome *</label>
              <input type="text" id="course-instructor" required placeholder="Seu nome completo">
            </div>
            <div class="form-group">
              <label for="course-price">Preço (R$) *</label>
              <input type="number" id="course-price" min="30" step="0.01" required placeholder="Ex: 97,90 (mínimo R$ 30,00)">
              <small>Lembrete: R$ 30,00 será destinado à plataforma a cada venda</small>
            </div>
            <div class="form-group">
              <label for="course-category">Categoria *</label>
              <select id="course-category" required>
                <option value="">Selecione uma categoria</option>
                <option value="programming">Programação</option>
                <option value="design">Design</option>
                <option value="marketing">Marketing</option>
                <option value="business">Negócios</option>
              </select>
            </div>
            <div class="form-group">
              <label for="course-image">URL da Imagem do Curso</label>
              <input type="url" id="course-image" placeholder="https://exemplo.com/imagem.jpg">
            </div>
            <div class="form-group">
              <label for="course-content">URL do Conteúdo (PDF, Link, etc.) *</label>
              <input type="url" id="course-content" required placeholder="https://exemplo.com/curso.pdf">
            </div>
            <button type="submit" class="btn">Publicar Curso</button>
          </form>
        </section>

        <section class="course-list">
          <h2>Meus Cursos Publicados</h2>
          <div id="courses-container">
            <div class="no-courses">
              <i class="fas fa-book-open fa-3x" style="color: #3498db; margin-bottom: 20px;"></i>
              <h3>Nenhum curso publicado</h3>
              <p>Adicione seu primeiro curso usando o formulário acima.</p>
            </div>
          </div>
        </section>
      </main>
    </div>
  </section>

  <!-- Seção de Estatísticas -->
  <section class="dashboard-section" id="stats-section">
    <div class="dashboard">
      <aside class="sidebar">
        <h2>Painel do Instrutor</h2>
        <ul>
          <li><a href="https://kzin82666-hub.github.io/Dev/"><i class="fa-solid fa-home"></i> Voltar ao Site</a></li>
          <li><a href="#" data-section="main-dashboard"><i class="fa-solid fa-gauge"></i> Dashboard</a></li>
          <li><a href="#" data-section="courses-section"><i class="fa-solid fa-book"></i> Meus Cursos</a></li>
          <li><a href="#" class="active" data-section="stats-section"><i class="fa-solid fa-chart-line"></i> Estatísticas</a></li>
          <li><a href="#" data-section="finance-section"><i class="fa-solid fa-wallet"></i> Financeiro</a></li>
          <li><a href="#" data-section="settings-section"><i class="fa-solid fa-gear"></i> Configurações</a></li>
        </ul>
      </aside>

      <main class="main-content">
        <header>
          <h1>Estatísticas e Relatórios</h1>
          <p>Analise o desempenho dos seus cursos</p>
        </header>

        <div class="cards">
          <div class="card">
            <h3>Visualizações este mês</h3>
            <p id="month-views">0</p>
          </div>
          <div class="card">
            <h3>Conversão</h3>
            <p id="conversion-rate">0%</p>
          </div>
          <div class="card">
            <h3>Novos alunos (30 dias)</h3>
            <p id="new-students">0</p>
          </div>
        </div>

        <div class="table-section">
          <h2>Desempenho por Curso</h2>
          <table id="course-performance">
            <thead>
              <tr>
                <th>Curso</th>
                <th>Visualizações</th>
                <th>Conversão</th>
                <th>Faturamento</th>
                <th>Sua Receita</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td colspan="5" style="text-align: center;">Nenhum dado disponível</td>
              </tr>
            </tbody>
          </table>
        </div>
      </main>
    </div>
  </section>

  <!-- Seção Financeira -->
  <section class="dashboard-section" id="finance-section">
    <div class="dashboard">
      <aside class="sidebar">
        <h2>Painel do Instrutor</h2>
        <ul>
          <li><a href="https://kzin82666-hub.github.io/Dev/"><i class="fa-solid fa-home"></i> Voltar ao Site</a></li>
          <li><a href="#" data-section="main-dashboard"><i class="fa-solid fa-gauge"></i> Dashboard</a></li>
          <li><a href="#" data-section="courses-section"><i class="fa-solid fa-book"></i> Meus Cursos</a></li>
          <li><a href="#" data-section="stats-section"><i class="fa-solid fa-chart-line"></i> Estatísticas</a></li>
          <li><a href="#" class="active" data-section="finance-section"><i class="fa-solid fa-wallet"></i> Financeiro</a></li>
          <li><a href="#" data-section="settings-section"><i class="fa-solid fa-gear"></i> Configurações</a></li>
        </ul>
      </aside>

      <main class="main-content">
        <header>
          <h1>Financeiro</h1>
          <p>Acompanhe seus ganhos e transações</p>
        </header>

        <div class="commission-info">
          <h3><i class="fas fa-info-circle"></i> Informações de Pagamento</h3>
          <p>Seus ganhos são depositados via PIX após a confirmação de cada venda.</p>
          <p><strong>Chave PIX: 10422308110</strong></p>
        </div>

        <div class="cards">
          <div class="card">
            <h3>Saldo Disponível</h3>
            <p id="available-balance">R$ 0,00</p>
          </div>
          <div class="card">
            <h3>A Receber</h3>
            <p id="pending-balance">R$ 0,00</p>
          </div>
          <div class="card">
            <h3>Total Recebido</h3>
            <p id="total-received">R$ 0,00</p>
          </div>
        </div>

        <div class="table-section">
          <h2>Últimas Transações</h2>
          <table id="transactions">
            <thead>
              <tr>
                <th>Data</th>
                <th>Curso</th>
                <th>Aluno</th>
                <th>Valor</th>
                <th>Sua Receita</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td colspan="6" style="text-align: center;">Nenhuma transação disponível</td>
              </tr>
            </tbody>
          </table>
        </div>
      </main>
    </div>
  </section>

  <!-- Seção de Configurações -->
  <section class="dashboard-section" id="settings-section">
    <div class="dashboard">
      <aside class="sidebar">
        <h2>Painel do Instrutor</h2>
        <ul>
          <li><a href="https://kzin82666-hub.github.io/Dev/"><i class="fa-solid fa-home"></i> Voltar ao Site</a></li>
          <li><a href="#" data-section="main-dashboard"><i class="fa-solid fa-gauge"></i> Dashboard</a></li>
          <li><a href="#" data-section="courses-section"><i class="fa-solid fa-book"></i> Meus Cursos</a></li>
          <li><a href="#" data-section="stats-section"><i class="fa-solid fa-chart-line"></i> Estatísticas</a></li>
          <li><a href="#" data-section="finance-section"><i class="fa-solid fa-wallet"></i> Financeiro</a></li>
          <li><a href="#" class="active" data-section="settings-section"><i class="fa-solid fa-gear"></i> Configurações</a></li>
        </ul>
      </aside>

      <main class="main-content">
        <header>
          <h1>Configurações</h1>
          <p>Gerencie suas preferências e dados da conta</p>
        </header>

        <div class="commission-info">
          <h3><i class="fas fa-info-circle"></i> Informações de Pagamento</h3>
          <p>Seus ganhos são depositados via PIX. Certifique-se de que sua chave PIX está correta.</p>
          <p><strong>Chave PIX: 10422308110</strong></p>
        </div>

        <div class="form-section">
          <h2>Dados Pessoais</h2>
          <form id="profile-form">
            <div class="form-group">
              <label for="profile-name">Nome Completo</label>
              <input type="text" id="profile-name" value="Seu Nome" required>
            </div>
            <div class="form-group">
              <label for="profile-email">E-mail</label>
              <input type="email" id="profile-email" value="seu@email.com" required>
            </div>
            <div class="form-group">
              <label for="profile-bio">Biografia</label>
              <textarea id="profile-bio">Especialista em desenvolvimento web com 10 anos de experiência.</textarea>
            </div>
            <div class="form-group">
              <label for="profile-pix">Chave PIX</label>
              <input type="text" id="profile-pix" value="10422308110" required>
              <small>Esta é a chave PIX onde você receberá seus pagamentos</small>
            </div>
            <div class="form-group">
              <label for="profile-photo">Foto de Perfil</label>
              <input type="file" id="profile-photo">
            </div>
            <button type="submit" class="btn">Salvar Alterações</button>
          </form>
        </div>

        <div class="form-section">
          <h2>Alterar Senha</h2>
          <form id="password-form">
            <div class="form-group">
              <label for="current-password">Senha Atual</label>
              <input type="password" id="current-password" required>
            </div>
            <div class="form-group">
              <label for="new-password">Nova Senha</label>
              <input type="password" id="new-password" required>
            </div>
            <div class="form-group">
              <label for="confirm-password">Confirmar Nova Senha</label>
              <input type="password" id="confirm-password" required>
            </div>
            <button type="submit" class="btn">Alterar Senha</button>
          </form>
        </div>
      </main>
    </div>
  </section>

  <script>
    // Dados iniciais - começando com array vazio
    let courses = JSON.parse(localStorage.getItem('devrise-courses')) || [];

    // Salvar cursos no localStorage
    function saveCourses() {
      localStorage.setItem('devrise-courses', JSON.stringify(courses));
    }

    document.addEventListener('DOMContentLoaded', function() {
      const navLinks = document.querySelectorAll('.sidebar a[data-section]');
      const sections = document.querySelectorAll('.dashboard-section');
      const coursesContainer = document.getElementById('courses-container');
      const courseForm = document.getElementById('course-form');
      const totalCoursesEl = document.getElementById('total-courses');
      const totalStudentsEl = document.getElementById('total-students');
      const totalRevenueEl = document.getElementById('total-revenue');
      const instructorRevenueEl = document.getElementById('instructor-revenue');
      const popularCoursesTable = document.querySelector('#popular-courses tbody');
      const coursePerformanceTable = document.querySelector('#course-performance tbody');
      const transactionsTable = document.querySelector('#transactions tbody');
      
      // Navegação entre seções
      navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const targetSection = this.getAttribute('data-section');
          
          // Esconder todas as seções
          sections.forEach(section => {
            section.classList.remove('active');
          });
          
          // Mostrar a seção alvo
          document.getElementById(targetSection).classList.add('active');
          
          // Atualizar navegação ativa
          document.querySelectorAll('.sidebar a').forEach(item => {
            item.classList.remove('active');
          });
          this.classList.add('active');
          
          // Atualizar estatísticas se for a seção principal
          if (targetSection === 'main-dashboard') {
            updateDashboardStats();
          }
          
          // Atualizar cursos se for a seção de cursos
          if (targetSection === 'courses-section') {
            renderInstructorCourses();
          }
          
          // Atualizar finanças se for a seção financeira
          if (targetSection === 'finance-section') {
            updateFinanceData();
          }
        });
      });
      
      // Carregar cursos no dashboard
      renderInstructorCourses();
      updateDashboardStats();
      updateFinanceData();
      
      // Formulário de curso
      courseForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const title = document.getElementById('course-title').value;
        const description = document.getElementById('course-description').value;
        const instructor = document.getElementById('course-instructor').value;
        const price = parseFloat(document.getElementById('course-price').value);
        const category = document.getElementById('course-category').value;
        const imageUrl = document.getElementById('course-image').value;
        const contentUrl = document.getElementById('course-content').value;
        
        if (price < 30) {
          alert('O preço mínimo do curso deve ser R$ 30,00 para cobrir a comissão da plataforma.');
          return;
        }
        
        if (title && instructor && price && category && contentUrl) {
          // Criar novo curso
          const newCourse = {
            id: courses.length > 0 ? Math.max(...courses.map(c => c.id)) + 1 : 1,
            title: title,
            instructor: instructor,
            description: description,
            price: price,
            students: 0,
            rating: 4.5,
            category: category,
            image: imageUrl || 'default',
            contentUrl: contentUrl,
            createdAt: new Date().toISOString()
          };
          
          // Adicionar à lista
          courses.push(newCourse);
          saveCourses();
          
          // Atualizar exibição
          renderInstructorCourses();
          updateDashboardStats();
          
          // Limpar formulário
          courseForm.reset();
          
          alert('Curso adicionado com sucesso!');
        }
      });
      
      // Função para renderizar cursos no dashboard do instrutor
      function renderInstructorCourses() {
        coursesContainer.innerHTML = '';
        
        // Filtrar apenas cursos do instrutor atual
        const instructorCourses = courses.filter(course => course.instructor === "Você" || course.instructor === document.getElementById('course-instructor').value || course.instructor === document.getElementById('profile-name').value);
        
        if (instructorCourses.length === 0) {
          coursesContainer.innerHTML = `
            <div class="no-courses">
              <i class="fas fa-book-open fa-3x" style="color: #3498db; margin-bottom: 20px;"></i>
              <h3>Nenhum curso publicado</h3>
              <p>Adicione seu primeiro curso usando o formulário acima.</p>
            </div>
          `;
          return;
        }
        
        instructorCourses.forEach(course => {
          const courseItem = document.createElement('div');
          courseItem.className = 'course-item';
          courseItem.setAttribute('data-course-id', course.id);
          courseItem.innerHTML = `
            <div>
              <h3>${course.title}</h3>
              <p>${course.description}</p>
              <p><strong>Preço:</strong> R$ ${course.price.toFixed(2)} | <strong>Alunos:</strong> ${course.students} | <strong>Avaliação:</strong> ${course.rating}</p>
              <p><strong>Conteúdo:</strong> <a href="${course.contentUrl}" target="_blank">Acessar</a></p>
              <div class="edit-form" id="edit-form-${course.id}">
                <h4>Editar Curso</h4>
                <form class="edit-course-form">
                  <div class="form-group">
                    <label>Título</label>
                    <input type="text" value="${course.title}" class="edit-title" required>
                  </div>
                  <div class="form-group">
                    <label>Descrição</label>
                    <textarea class="edit-description">${course.description}</textarea>
                  </div>
                  <div class="form-group">
                    <label>Preço</label>
                    <input type="number" value="${course.price}" class="edit-price" step="0.01" required>
                  </div>
                  <div class="form-group">
                    <label>URL do Conteúdo</label>
                    <input type="url" value="${course.contentUrl}" class="edit-content" required>
                  </div>
                  <button type="submit" class="btn">Salvar Alterações</button>
                  <button type="button" class="btn btn-danger cancel-edit">Cancelar</button>
                </form>
              </div>
            </div>
            <div class="course-actions">
              <button class="btn edit-btn" data-course-id="${course.id}">Editar</button>
              <button class="btn btn-danger delete-btn" data-course-id="${course.id}">Excluir</button>
            </div>
          `;
          
          coursesContainer.appendChild(courseItem);
        });
        
        // Adicionar eventos de edição e exclusão
        document.querySelectorAll('.edit-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            const courseId = parseInt(this.getAttribute('data-course-id'));
            const editForm = document.getElementById(`edit-form-${courseId}`);
            editForm.style.display = 'block';
          });
        });
        
        document.querySelectorAll('.cancel-edit').forEach(btn => {
          btn.addEventListener('click', function() {
            const courseItem = this.closest('.course-item');
            const editForm = courseItem.querySelector('.edit-form');
            editForm.style.display = 'none';
          });
        });
        
        document.querySelectorAll('.edit-course-form').forEach(form => {
          form.addEventListener('submit', function(e) {
            e.preventDefault();
            const courseItem = this.closest('.course-item');
            const courseId = parseInt(courseItem.getAttribute('data-course-id'));
            
            const title = this.querySelector('.edit-title').value;
            const description = this.querySelector('.edit-description').value;
            const price = parseFloat(this.querySelector('.edit-price').value);
            const contentUrl = this.querySelector('.edit-content').value;
            
            // Atualizar curso
            const courseIndex = courses.findIndex(c => c.id === courseId);
            if (courseIndex !== -1) {
              courses[courseIndex].title = title;
              courses[courseIndex].description = description;
              courses[courseIndex].price = price;
              courses[courseIndex].contentUrl = contentUrl;
              saveCourses();
              
              // Recarregar cursos
              renderInstructorCourses();
              updateDashboardStats();
              
              alert('Curso atualizado com sucesso!');
            }
          });
        });
        
        document.querySelectorAll('.delete-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            const courseId = parseInt(this.getAttribute('data-course-id'));
            deleteCourse(courseId);
          });
        });
      }
      
      // Função para atualizar estatísticas do dashboard
      function updateDashboardStats() {
        // Filtrar apenas cursos do instrutor atual
        const instructorName = document.getElementById('profile-name')?.value || "Você";
        const instructorCourses = courses.filter(course => course.instructor === instructorName);
        
        // Calcular totais
        const totalCourses = instructorCourses.length;
        const totalStudents = instructorCourses.reduce((sum, course) => sum + course.students, 0);
        const totalRevenue = instructorCourses.reduce((sum, course) => sum + (course.price * course.students), 0);
        const instructorRevenue = instructorCourses.reduce((sum, course) => sum + ((course.price - 30) * course.students), 0);
        const averageRating = instructorCourses.length > 0 
          ? instructorCourses.reduce((sum, course) => sum + course.rating, 0) / instructorCourses.length 
          : 0;
        
        // Atualizar elementos
        totalCoursesEl.textContent = totalCourses;
        totalStudentsEl.textContent = totalStudents;
        totalRevenueEl.textContent = `R$ ${totalRevenue.toFixed(2)}`;
        instructorRevenueEl.textContent = `R$ ${instructorRevenue.toFixed(2)}`;
        
        // Atualizar tabela de cursos populares
        popularCoursesTable.innerHTML = '';
        
        if (instructorCourses.length === 0) {
          popularCoursesTable.innerHTML = `
            <tr>
              <td colspan="4" style="text-align: center;">Nenhum curso disponível</td>
            </tr>
          `;
        } else {
          const popularCourses = [...instructorCourses].sort((a, b) => b.students - a.students).slice(0, 5);
          
          popularCourses.forEach(course => {
            const row = document.createElement('tr');
            row.innerHTML = `
              <td>${course.title}</td>
              <td>${course.students}</td>
              <td>R$ ${(course.price * course.students).toFixed(2)}</td>
              <td>R$ ${((course.price - 30) * course.students).toFixed(2)}</td>
            `;
            popularCoursesTable.appendChild(row);
          });
        }
        
        // Atualizar tabela de desempenho
        coursePerformanceTable.innerHTML = '';
        
        if (instructorCourses.length === 0) {
          coursePerformanceTable.innerHTML = `
            <tr>
              <td colspan="5" style="text-align: center;">Nenhum dado disponível</td>
            </tr>
          `;
        } else {
          instructorCourses.forEach(course => {
            const views = Math.floor(course.students * (10 + Math.random() * 10));
            const conversion = ((course.students / views) * 100).toFixed(1);
            const revenue = course.price * course.students;
            const instructorEarnings = (course.price - 30) * course.students;
            
            const row = document.createElement('tr');
            row.innerHTML = `
              <td>${course.title}</td>
              <td>${views}</td>
              <td>${conversion}%</td>
              <td>R$ ${revenue.toFixed(2)}</td>
              <td>R$ ${instructorEarnings.toFixed(2)}</td>
            `;
            coursePerformanceTable.appendChild(row);
          });
        }
      }
      
      // Função para atualizar dados financeiros
      function updateFinanceData() {
        const instructorName = document.getElementById('profile-name')?.value || "Você";
        const instructorCourses = courses.filter(course => course.instructor === instructorName);
        
        const totalRevenue = instructorCourses.reduce((sum, course) => sum + (course.price * course.students), 0);
        const instructorRevenue = instructorCourses.reduce((sum, course) => sum + ((course.price - 30) * course.students), 0);
        const availableBalance = instructorRevenue * 0.7; // 70% disponível
        const pendingBalance = instructorRevenue * 0.3; // 30% a receber
        
        document.getElementById('available-balance').textContent = `R$ ${availableBalance.toFixed(2)}`;
        document.getElementById('pending-balance').textContent = `R$ ${pendingBalance.toFixed(2)}`;
        document.getElementById('total-received').textContent = `R$ ${instructorRevenue.toFixed(2)}`;
        
        // Atualizar tabela de transações
        transactionsTable.innerHTML = '';
        
        if (instructorCourses.length === 0) {
          transactionsTable.innerHTML = `
            <tr>
              <td colspan="6" style="text-align: center;">Nenhuma transação disponível</td>
            </tr>
          `;
        } else {
          // Gerar transações fictícias baseadas nos cursos
          const transactions = [];
          
          instructorCourses.forEach(course => {
            for (let i = 0; i < course.students; i++) {
              const transactionDate = new Date(Date.now() - Math.random() * 30 * 24 * 60 * 60 * 1000);
              transactions.push({
                date: transactionDate.toLocaleDateString('pt-BR'),
                course: course.title,
                student: `Aluno ${i+1}`,
                value: course.price,
                instructorValue: course.price - 30,
                status: Math.random() > 0.3 ? 'Pago' : 'Processando'
              });
            }
          });
          
          // Ordenar por data (mais recente primeiro)
          transactions.sort((a, b) => new Date(b.date) - new Date(a.date));
          
          // Mostrar apenas as 10 transações mais recentes
          transactions.slice(0, 10).forEach(transaction => {
            const row = document.createElement('tr');
            row.innerHTML = `
              <td>${transaction.date}</td>
              <td>${transaction.course}</td>
              <td>${transaction.student}</td>
              <td>R$ ${transaction.value.toFixed(2)}</td>
              <td>R$ ${transaction.instructorValue.toFixed(2)}</td>
              <td>${transaction.status}</td>
            `;
            transactionsTable.appendChild(row);
          });
        }
      }
      
      // Função para excluir curso
      function deleteCourse(courseId) {
        if (confirm('Tem certeza que deseja excluir este curso?')) {
          courses = courses.filter(course => course.id !== courseId);
          saveCourses();
          
          // Recarregar cursos
          renderInstructorCourses();
          updateDashboardStats();
          updateFinanceData();
        }
      }
    });
  </script>
</body>
</html>